{"version":3,"file":"modal-subscription-da68d244.js","sources":["../../src/js/services/food-api.js","../../src/js/services/helpers.js","../../src/icons.svg","../../src/js/home-content/main-products/main-projects.js","../../src/js/modals/modal-subscription/modal-subscription.js"],"sourcesContent":["import axios from 'axios';\nimport Swal from 'sweetalert2';\n\n\naxios.defaults.baseURL = 'https://food-boutique.b.goit.study/api';\n\nexport const getCategoryList = async () => {\n\tconst { data } = await axios.get(`/products/categories`);\n\treturn data;\n};\n\nexport const getAllProducts = async () => {\n\tconst { data } = await axios.get(`/products`);\n\treturn data;\n};\n\nexport const getCurrentProducts = async ({\n\tkeyword,\n\tcategory,\n\tpage,\n\tlimit,\n\tsortBy,\n}) => {\n\tconst params = new URLSearchParams({\n\t\tpage,\n\t\tlimit,\n\t});\n\n\tif (keyword) {\n\t\tparams.set('keyword', keyword);\n\t}\n\n\tif (category) {\n\t\tparams.set('category', category);\n\t}\n\n\tif (sortBy) {\n\t\tparams.set('sortBy', sortBy);\n\t}\n\n\tconst { data } = await axios.get(`/products/`, { params });\n\n\treturn data;\n};\n\nexport const getProductById = async id => {\n\tconst data = await axios.get(`/products/${id}`);\n\treturn data;\n};\nexport const getPopularProducts = async limit => {\n\tconst { data } = await axios.get(`/products/popular?limit=${limit}`);\n\treturn data;\n};\n\nexport const getDiscountProducts = async () => {\n\tconst { data } = await axios.get(`/products/discount`);\n\treturn data;\n};\nexport const addEmail = async body => {\n\tconst { data } = await axios.post(`/subscription`, body);\n\n\treturn data;\n};\n\nexport function showError() {\n\tSwal.fire({\n\t\ticon: 'error',\n\t\ttitle: 'Oops...',\n\t\ttext: 'Something went wrong!',\n\t});\n}\n","import Notiflix from 'notiflix';\n\nexport function saveToLS(key, value) {\n\tlocalStorage.setItem(key, JSON.stringify(value));\n}\n\nexport function loadFromLS(key) {\n\tconst data = localStorage.getItem(key);\n\n\ttry {\n\t\treturn JSON.parse(data);\n\t} catch (error) {\n\t\tNotiflix.Notify.failure('Oops! Something went wrong!');\n\t\treturn data;\n\t}\n}\n","export default \"__VITE_ASSET__664e397c__\"","export { cardMarkup };\nimport { getProductById } from '../../services/food-api';\nimport { saveToLS, loadFromLS } from '../../services/helpers';\nimport icons from '/icons.svg';\n\nfunction cardMarkup(products) {\n\treturn products\n\t\t.map(\n\t\t\t({ img, name, category, size, popularity, _id, price }) =>\n\t\t\t\t`<li class=\"card-wrapper\" data-id=\"${_id}\">\n\t\t\t\t\t<div class=\"image-wrapper\">\n\t\t\t\t\t<img src=\"${img}\" alt=\"${name}\" loading=\"lazy\" class=\"product-image\" width=\"140\" height=\"140\" />\n\t\t\t\t\t</div>\n\t\t   <div class=\"product-info\">\n\t\t\t<p class=\"product-name\">\n\t\t\t\t${name}\n\t\t\t </p>\n\t\t\t<div class =\"product-items\">\n\t\t\t<p  class=\"product-item\">\n\t\t\tCategory:<span class=\"product-more-info\"> &nbsp;${category.replaceAll(\n\t\t\t\t'_',\n\t\t\t\t' '\n\t\t\t)}</span>\n\t\t  </p>\n\t\t  <p class=\"product-item\">\n\t\t\tSize:<span class=\"product-more-info\"> &nbsp;${size}</span>\n\t\t  </p>\n\t\t  <p class=\"product-item\">\n\t\t\tPopularity:<span class=\"product-more-info\"> &nbsp;${popularity}</span>\n\t\t  </p></div>\n\t\t\t \n\t\t   </div>\n\t\t   <div class=\"price-and-add\">\n\t\t\t <p class=\"product-price\">$${price}</p>\n\t\t\t <button class=\"add-button\" type=\"button\" data-id=\"${_id}\">\n\t\t\t <svg class=\"icon-button\"width=\"18\" height=\"18\">\n             <use href=\"${icons}#icon-cart-mob\" class=\"svg-change\">\n             </use>\n\t\t\t </svg>\n\t\t\t </button>\n\t\n\t\t\t </div>\n\t\t   \n\t\t   </li>`\n\t\t)\n\n\t\t.join('');\n}\n\n\n\n\nexport function updateCounter () {\n\tconst cartValueMain = document.querySelector('.js-cart-counter');\n\tconst storage = loadFromLS('products')\n\tcartValueMain.textContent = storage.length\n\n}\n\n\n\n\n\n\nif (!localStorage.getItem('products')) {\n\tconst defaultProducts = []; \n\tlocalStorage.setItem('products', JSON.stringify(defaultProducts));\n\tupdateCounter()\n} else {\n\tupdateCounter()\n}\n\n\n\t\n\nexport async function onAddButtonClick(event) {\n\tconst productID = event.currentTarget.dataset.id;\n\t\n\n\tconst existingProducts = loadFromLS('products') || [];\n\t\n\tconsole.log(existingProducts);\n\n\t\n\n\t\n\n\ttry {\n\t\tconst product = await getProductById(productID);\n\t\t\n\t\t\n\t\tif (\n\t\t\t!existingProducts.some(\n\t\t\t\texistingProduct => existingProduct.data._id === productID\n\t\t\t)\n\t\t) {\n\t\t\texistingProducts.push(product);\n\t\t\tsaveToLS('products', existingProducts);\n\t\t\tupdateCounter()\n\n\t\t\tconst addButtons = document.querySelectorAll('.add-button');\n\t\t\t\n\n\t\t\taddButtons.forEach(addButton => {\n\t\t\t\tconst buttonID = addButton.dataset.id;\n\n\t\t\t\tif (buttonID === productID) {\n\t\t\t\t\taddButton.removeEventListener('click', onAddButtonClick);\n\t\t\t\t\tconst useElement = addButton.querySelector('svg use');\n\t\t\t\t\taddButton.style.backgroundColor = '#6D8434';\n\t\t\t\t\tuseElement.setAttribute('href', `${icons}#icon-cart-success`);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t} catch (err) {\n\t\tthrow new Error(err);\n\t}\n}\n\nexport function basketProductMarkUp({\n\timg,\n\tname,\n\tcategory,\n\tsize,\n\tpopularity,\n\t_id,\n\tprice,\n}) {\n\treturn;\n\t`<li class=\"card-wrapper\" data-id=\"${_id}\">\n            <div class=\"image-wrapper\">\n            <img src=\"${img}\" alt=\"${name}\" loading=\"lazy\" class=\"product-image\" width=\"140\" height=\"140\" />\n            </div>\n            <div class=\"product-info\">\n            <p class=\"product-name\">\n            ${name}\n            </p>\n            <div class =\"product-items\">\n            <p  class=\"product-item\">\n            Category:<span class=\"product-more-info\"> &nbsp;${category}</span>\n            </p>\n            <p class=\"product-item\">\n            Size:<span class=\"product-more-info\"> &nbsp;${size}</span>\n            </p>\n            <p class=\"product-item\">\n            Popularity:<span class=\"product-more-info\"> &nbsp;${popularity}</span>\n            </p></div>\n            \n            </div>\n            <div class=\"price-and-add\">\n            <p class=\"product-price\">$${price}</p>\n            <button class=\"add-button\" type=\"button\" data-id=\"${_id}\">\n            <svg class=\"icon-button\"width=\"18\" height=\"18\">\n            <use href=\"/icons.svg#icon-cart-mob\" >\n            </use></svg>\n            </button>\n            \n            </div>\n            \n            </li>`;\n}\n","import Notiflix from 'notiflix';\nimport axios from 'axios';\nimport { addEmail } from '../../services/food-api';\nimport { showError } from '../../services/food-api';\nimport icons from '/icons.svg';\n\nconst formElem = document.querySelector('.form-footer');\nconst modalSubscription = document.querySelector('.modal-subscription');\nconst modalUnsubscription = document.querySelector('.modal-unsubscription');\nconst modalBackElem = document.querySelector('.modal-backdrop-subscription');\nconst closeBackDrop = document.querySelector('.container-modal');\nmodalSubscription.classList.add('is-hidden');\nmodalUnsubscription.classList.add('is-hidden');\n\nconst closeModal = event => {\n\tconst target = event.target;\n\tif (target === modalSubscription || target.closest('.close')) {\n\t\tmodalSubscription.classList.add('is-hidden');\n\t\tmodalBackElem.classList.add('is-hidden');\n\t}\n\tif (target === modalUnsubscription || target.closest('.close')) {\n\t\tmodalUnsubscription.classList.add('is-hidden');\n\t\tmodalBackElem.classList.add('is-hidden');\n\t}\n\tif (target === closeBackDrop || target.closest('.close')) {\n\t\tmodalUnsubscription.classList.add('is-hidden');\n\t\tmodalBackElem.classList.add('is-hidden');\n\t}\n};\n\nfunction onCloseModal(evt) {\n\tif (evt.key === 'Escape' || evt.target === modalBackElem) {\n\t\tmodalSubscription.classList.add('is-hidden');\n\t\tmodalUnsubscription.classList.add('is-hidden');\n\t\tmodalBackElem.classList.add('is-hidden');\n\t\tdocument.body.style.overflow = 'auto';\n\t}\n}\n\nconst openModalSubscription = () => {\n\tmodalSubscription.classList.remove('is-hidden');\n\tmodalBackElem.classList.remove('is-hidden');\n\tdocument.body.style.overflow = 'hidden';\n};\n\nconst openModalUnsubscription = () => {\n\tmodalUnsubscription.classList.remove('is-hidden');\n\tmodalBackElem.classList.remove('is-hidden');\n\tdocument.body.style.overflow = 'hidden';\n};\n\nconst handleSubscription = async email => {\n\tconst body = { email };\n\n\ttry {\n\t\tconst checkedEmail = await addEmail(body);\n\n\t\topenModalSubscription();\n\t} catch (err) {\n\t\tif (err.response.data.message === 'Subscription already exists') {\n\t\t\topenModalUnsubscription();\n\t\t} else {\n\t\t\tshowError();\n\t\t}\n\t}\n};\n\nfunction handleSubmit(e) {\n\te.preventDefault();\n\tconst emailInput = document.querySelector('.input-label');\n\tconst email = emailInput.value.trim();\n\thandleSubscription(email);\n\tformElem.reset();\n}\n\nformElem.addEventListener('submit', handleSubmit);\nmodalSubscription.addEventListener('click', closeModal);\nmodalUnsubscription.addEventListener('click', closeModal);\nmodalBackElem.addEventListener('click', closeModal);\ndocument.addEventListener('keydown', onCloseModal);\ndocument.addEventListener('click', onCloseModal);\n"],"names":["axios","getCategoryList","data","getCurrentProducts","keyword","category","page","limit","sortBy","params","getProductById","id","getPopularProducts","getDiscountProducts","addEmail","body","showError","Swal","saveToLS","key","value","loadFromLS","Notiflix","icons","cardMarkup","products","img","name","size","popularity","_id","price","updateCounter","cartValueMain","storage","defaultProducts","onAddButtonClick","event","productID","existingProducts","product","existingProduct","addButton","useElement","err","formElem","modalSubscription","modalUnsubscription","modalBackElem","closeBackDrop","closeModal","target","onCloseModal","evt","openModalSubscription","openModalUnsubscription","handleSubscription","email","checkedEmail","handleSubmit","e"],"mappings":"wvBAIAA,EAAM,SAAS,QAAU,yCAEb,MAACC,EAAkB,SAAY,CAC1C,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMF,EAAM,IAAI,sBAAsB,EACvD,OAAOE,CACR,EAOaC,EAAqB,MAAO,CACxC,QAAAC,EACA,SAAAC,EACA,KAAAC,EACA,MAAAC,EACA,OAAAC,CACD,IAAM,CACL,MAAMC,EAAS,IAAI,gBAAgB,CAClC,KAAAH,EACA,MAAAC,CACF,CAAE,EAEGH,GACHK,EAAO,IAAI,UAAWL,CAAO,EAG1BC,GACHI,EAAO,IAAI,WAAYJ,CAAQ,EAG5BG,GACHC,EAAO,IAAI,SAAUD,CAAM,EAG5B,KAAM,CAAE,KAAAN,GAAS,MAAMF,EAAM,IAAI,aAAc,CAAE,OAAAS,CAAM,CAAE,EAEzD,OAAOP,CACR,EAEaQ,EAAiB,MAAMC,GACtB,MAAMX,EAAM,IAAI,aAAaW,CAAE,EAAE,EAGlCC,EAAqB,MAAML,GAAS,CAChD,KAAM,CAAE,KAAAL,CAAM,EAAG,MAAMF,EAAM,IAAI,2BAA2BO,CAAK,EAAE,EACnE,OAAOL,CACR,EAEaW,EAAsB,SAAY,CAC9C,KAAM,CAAE,KAAAX,CAAI,EAAK,MAAMF,EAAM,IAAI,oBAAoB,EACrD,OAAOE,CACR,EACaY,EAAW,MAAMC,GAAQ,CACrC,KAAM,CAAE,KAAAb,CAAM,EAAG,MAAMF,EAAM,KAAK,gBAAiBe,CAAI,EAEvD,OAAOb,CACR,EAEO,SAASc,GAAY,CAC3BC,EAAK,KAAK,CACT,KAAM,QACN,MAAO,UACP,KAAM,uBACR,CAAE,CACF,CCpEO,SAASC,EAASC,EAAKC,EAAO,CACpC,aAAa,QAAQD,EAAK,KAAK,UAAUC,CAAK,CAAC,CAChD,CAEO,SAASC,EAAWF,EAAK,CAC/B,MAAMjB,EAAO,aAAa,QAAQiB,CAAG,EAErC,GAAI,CACH,OAAO,KAAK,MAAMjB,CAAI,CACtB,MAAe,CACf,OAAAoB,EAAS,OAAO,QAAQ,6BAA6B,EAC9CpB,CACP,CACF,CCfA,MAAeqB,EAAA,yCCKf,SAASC,EAAWC,EAAU,CAC7B,OAAOA,EACL,IACA,CAAC,CAAE,IAAAC,EAAK,KAAAC,EAAM,SAAAtB,EAAU,KAAAuB,EAAM,WAAAC,EAAY,IAAAC,EAAK,MAAAC,CAAO,IACrD,qCAAqCD,CAAG;AAAA;AAAA,iBAE3BJ,CAAG,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA,MAI5BA,CAAI;AAAA;AAAA;AAAA;AAAA,qDAI2CtB,EAAS,WAC1D,IACA,GACJ,CAAI;AAAA;AAAA;AAAA,iDAG6CuB,CAAI;AAAA;AAAA;AAAA,uDAGEC,CAAU;AAAA;AAAA;AAAA;AAAA;AAAA,gCAKjCE,CAAK;AAAA,wDACmBD,CAAG;AAAA;AAAA,0BAEjCP,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAQ5B,EAEA,KAAK,EAAE,CACV,CAKO,SAASS,GAAiB,CAChC,MAAMC,EAAgB,SAAS,cAAc,kBAAkB,EACzDC,EAAUb,EAAW,UAAU,EACrCY,EAAc,YAAcC,EAAQ,MAErC,CAOA,GAAK,aAAa,QAAQ,UAAU,EAKnCF,EAAe,MALuB,CACtC,MAAMG,EAAkB,CAAA,EACxB,aAAa,QAAQ,WAAY,KAAK,UAAUA,CAAe,CAAC,EAChEH,EAAe,CAChB,CAOO,eAAeI,EAAiBC,EAAO,CAC7C,MAAMC,EAAYD,EAAM,cAAc,QAAQ,GAGxCE,EAAmBlB,EAAW,UAAU,GAAK,CAAA,EAEnD,QAAQ,IAAIkB,CAAgB,EAM5B,GAAI,CACH,MAAMC,EAAU,MAAM9B,EAAe4B,CAAS,EAI5CC,EAAiB,KACjBE,GAAmBA,EAAgB,KAAK,MAAQH,CAChD,IAEDC,EAAiB,KAAKC,CAAO,EAC7BtB,EAAS,WAAYqB,CAAgB,EACrCP,EAAe,EAEI,SAAS,iBAAiB,aAAa,EAG/C,QAAQU,GAAa,CAG/B,GAFiBA,EAAU,QAAQ,KAElBJ,EAAW,CAC3BI,EAAU,oBAAoB,QAASN,CAAgB,EACvD,MAAMO,EAAaD,EAAU,cAAc,SAAS,EACpDA,EAAU,MAAM,gBAAkB,UAClCC,EAAW,aAAa,OAAQ,GAAGpB,CAAK,oBAAoB,CAC5D,CACL,CAAI,EAEF,OAAQqB,EAAK,CACb,MAAM,IAAI,MAAMA,CAAG,CACnB,CACF,CC/GA,MAAMC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAoB,SAAS,cAAc,qBAAqB,EAChEC,EAAsB,SAAS,cAAc,uBAAuB,EACpEC,EAAgB,SAAS,cAAc,8BAA8B,EACrEC,EAAgB,SAAS,cAAc,kBAAkB,EAC/DH,EAAkB,UAAU,IAAI,WAAW,EAC3CC,EAAoB,UAAU,IAAI,WAAW,EAE7C,MAAMG,EAAab,GAAS,CAC3B,MAAMc,EAASd,EAAM,QACjBc,IAAWL,GAAqBK,EAAO,QAAQ,QAAQ,KAC1DL,EAAkB,UAAU,IAAI,WAAW,EAC3CE,EAAc,UAAU,IAAI,WAAW,IAEpCG,IAAWJ,GAAuBI,EAAO,QAAQ,QAAQ,KAC5DJ,EAAoB,UAAU,IAAI,WAAW,EAC7CC,EAAc,UAAU,IAAI,WAAW,IAEpCG,IAAWF,GAAiBE,EAAO,QAAQ,QAAQ,KACtDJ,EAAoB,UAAU,IAAI,WAAW,EAC7CC,EAAc,UAAU,IAAI,WAAW,EAEzC,EAEA,SAASI,EAAaC,EAAK,EACtBA,EAAI,MAAQ,UAAYA,EAAI,SAAWL,KAC1CF,EAAkB,UAAU,IAAI,WAAW,EAC3CC,EAAoB,UAAU,IAAI,WAAW,EAC7CC,EAAc,UAAU,IAAI,WAAW,EACvC,SAAS,KAAK,MAAM,SAAW,OAEjC,CAEA,MAAMM,EAAwB,IAAM,CACnCR,EAAkB,UAAU,OAAO,WAAW,EAC9CE,EAAc,UAAU,OAAO,WAAW,EAC1C,SAAS,KAAK,MAAM,SAAW,QAChC,EAEMO,EAA0B,IAAM,CACrCR,EAAoB,UAAU,OAAO,WAAW,EAChDC,EAAc,UAAU,OAAO,WAAW,EAC1C,SAAS,KAAK,MAAM,SAAW,QAChC,EAEMQ,EAAqB,MAAMC,GAAS,CACzC,MAAM1C,EAAO,CAAE,MAAA0C,GAEf,GAAI,CACH,MAAMC,EAAe,MAAM5C,EAASC,CAAI,EAExCuC,GACA,OAAQV,EAAK,CACTA,EAAI,SAAS,KAAK,UAAY,8BACjCW,IAEAvC,GAED,CACF,EAEA,SAAS2C,EAAaC,EAAG,CACxBA,EAAE,eAAc,EAEhB,MAAMH,EADa,SAAS,cAAc,cAAc,EAC/B,MAAM,KAAI,EACnCD,EAAmBC,CAAK,EACxBZ,EAAS,MAAK,CACf,CAEAA,EAAS,iBAAiB,SAAUc,CAAY,EAChDb,EAAkB,iBAAiB,QAASI,CAAU,EACtDH,EAAoB,iBAAiB,QAASG,CAAU,EACxDF,EAAc,iBAAiB,QAASE,CAAU,EAClD,SAAS,iBAAiB,UAAWE,CAAY,EACjD,SAAS,iBAAiB,QAASA,CAAY"}