{"version":3,"file":"main-projects-61c4b6f1.js","sources":["../../src/js/services/food-api.js","../../src/js/filters/filters.js","../../src/js/home-content/main-products/main-projects.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://food-boutique.b.goit.study/api';\n\nexport const getCategoryList = async () => {\n\tconst { data } = await axios.get(`/products/categories`);\n\treturn data;\n};\n\nexport const getCurrentProducts = async ({\n\tvalue,\n\tcategory,\n\tpage,\n\tlimit,\n\tsortBy,\n}) => {\n\tconst params = new URLSearchParams({\n\t\tpage,\n\t\tlimit,\n\t});\n\n\tif (value) {\n\t\tparams.set('value', value);\n\t}\n\n\tif (category) {\n\t\tparams.set('category', category);\n\t}\n\n\tif (sortBy) {\n\t\tparams.set('sortBy', sortBy);\n\t}\n\n\tconst { data } = await axios.get(`/products/`, { params });\n\n\treturn data;\n};\n\nexport const getProductById = async id => {\n\tconst { data } = await axios.get(`/products/${id}`);\n\treturn data;\n};\nexport const getPopularProducts = async limit => {\n\tconst { data } = await axios.get(`/products/popular?limit=${limit}`);\n\treturn data;\n};\n\nexport const getDiscountProducts = async () => {\n\tconst { data } = await axios.get(`/products/discount`);\n\treturn data;\n};\n","import { getCategoryList } from '../services/food-api';\n// import { cardMarkup } from '../home-content/main-products/main-projects';\n// import { getCurrentProducts } from '../services/food-api';\nimport SlimSelect from 'slim-select';\nimport { cardMarkup } from '../home-content/main-products/main-projects';\nimport { getCurrentProducts } from '../services/food-api';\n// export { changingLimit } \n\nconst refs = {\n\tselectEl: document.querySelector('.filterts-categories-select'),\n\tcardProduct: document.querySelector('.product-list'),\n};\n\n\n\nconst STORAGE_FILTERS_KEY = 'filters-parameters';\n\n\nexport let filters = {\n\tkeyword: '',\n\tcategory: '',\n\tpage: 1,\n\tlimit: 6,\n};\n\nchangingLimit();\n\ngetCategoryList()\n\t.then(data => {\n\t\trenderSelectList(data);\n\t\tconsole.log(data);\n\t})\n\t.catch(err => console.log(err));\n\nfunction renderSelectList(data) {\n\tconst placeholderStr = `<option disabled selected value=\"Show All\" hidden data-placeholder=\"true\">Categories</option>`;\n\n\trefs.selectEl.insertAdjacentHTML('afterbegin', placeholderStr);\n\n\tconst markupSelectList = data\n\t\t.map(elem => {\n\t\t\treturn `<option value=\"${elem}\">${elem.replaceAll('_', ' ')}</option>`;\n\t\t})\n\t\t.join('')\n\t\t.concat(`<option value=\"\">Show All</option>`);\n\n\trefs.selectEl.insertAdjacentHTML('beforeend', markupSelectList);\n\n\tnew SlimSelect({\n\t\tselect: refs.selectEl,\n\t\tsettings: {\n\t\t\tshowSearch: false,\n\t\t\tsearchHighlight: true,\n\t\t},\n\t});\n}\n\nlocalStorage.setItem(STORAGE_FILTERS_KEY, JSON.stringify(filters));\n\nrefs.selectEl.addEventListener('change', onSelect);\n\nfunction onSelect(evt) {\n\tfilters.category = evt.target.value;\n\trenderProductList();\n}\n\nasync function renderProductList() {\n\tlocalStorage.setItem(STORAGE_FILTERS_KEY, JSON.stringify(filters));\n\ttry {\n\t\tconst data = await getCurrentProducts(filters);\n\t\trefs.cardProduct.innerHTML = cardMarkup(data.results);\n\t} catch (err) {\n\t\tconsole.log(err);\n\t}\n}\n\nexport function changingLimit() {\n\tif (window.innerWidth >= 768 && window.innerWidth < 1440) {\n\t\tfilters.limit = 8;\n\t} else if (window.innerWidth >= 1440) {\n\t\tfilters.limit = 9;\n\t}\n\treturn filters.limit;\n}\n","import { getCurrentProducts } from '../../services/food-api.js';\nimport { filters, changingLimit } from '../../filters/filters.js';\nexport { cardMarkup };\nimport { getProductById } from '../../services/food-api.js';\n\nconst cardProduct = document.querySelector('.product-list');\nconst loaderEl = document.querySelector('.loader');\n\nlet newFilters = filters;\nlet ID = '';\nconsole.log(newFilters);\nchangingLimit(newFilters);\n\ngetCurrentProducts(newFilters)\n\t.then(data => {\n\t\tloaderEl.style.display = 'none';\n\n\t\tconst products = data.results;\n\t\tconsole.log(products);\n\n\t\tcardProduct.insertAdjacentHTML('afterbegin', cardMarkup(products));\n\n\t\tconst addButtons = document.querySelectorAll('.add-button');\n\n\t\tfor (const addButton of addButtons) {\n\t\t\taddButton.addEventListener('click', onAddButtonClick);\n\t\t}\n\t})\n\t.catch(error => {\n\t\tconsole.log(error);\n\t});\n\nfunction cardMarkup(products) {\n\treturn products\n\t\t.map(\n\t\t\t({ img, name, category, size, popularity, _id, price }) =>\n\t\t\t\t`<li class=\"card-wrapper\" data-id=\"${_id}\">\n\t\t\t\t\t<div class=\"image-wrapper\">\n\t\t\t\t\t<img src=\"${img}\" alt=\"${name}\" loading=\"lazy\" class=\"product-image\" width=\"140\" height=\"140\" />\n\t\t\t\t\t</div>\n\t\t   <div class=\"product-info\">\n\t\t\t <p class=\"product-name\">\n\t\t\t   ${name}\n\t\t\t </p>\n\t\t\t<div class =\"product-items\">\n\t\t\t<p  class=\"product-item\">\n\t\t\tCategory:<span class=\"product-more-info\"> &nbsp;${category.replaceAll(\n\t\t\t\t'_',\n\t\t\t\t' '\n\t\t\t)}</span>\n\t\t  </p>\n\t\t  <p class=\"product-item\">\n\t\t\tSize:<span class=\"product-more-info\"> &nbsp;${size}</span>\n\t\t  </p>\n\t\t  <p class=\"product-item\">\n\t\t\tPopularity:<span class=\"product-more-info\"> &nbsp;${popularity}</span>\n\t\t  </p></div>\n\t\t\t \n\t\t   </div>\n\t\t   <div class=\"price-and-add\">\n\t\t\t <p class=\"product-price\">$${price}</p>\n\t\t\t <button class=\"add-button\" type=\"button\" data-id=\"${_id}\">\n\t\t\t <svg class=\"icon-button\"width=\"18\" height=\"18\">\n             <use href=\"/icons.svg#icon-cart-mob\" >\n             </use></svg>\n\t\t\t </button>\n\t\n\t\t\t </div>\n\t\t   \n\t\t   </li>`\n\t\t)\n\n\t\t.join('');\n}\n\nasync function onAddButtonClick(event) {\n\tconst productID = event.currentTarget.dataset.id;\n\tconst savedProducts = JSON.parse(localStorage.getItem('products')) || [];\n\n\ttry {\n\t\tconst product = await getProductById(productID);\n\n\t\tsavedProducts.push(product);\n\n\t\tlocalStorage.setItem('products', JSON.stringify(savedProducts));\n\t} catch (err) {\n\t\tthrow new Error(err);\n\t}\n}\n"],"names":["axios","getCategoryList","data","getCurrentProducts","value","category","page","limit","sortBy","params","getProductById","id","getPopularProducts","getDiscountProducts","refs","STORAGE_FILTERS_KEY","filters","changingLimit","renderSelectList","err","placeholderStr","markupSelectList","elem","SlimSelect","onSelect","evt","renderProductList","cardMarkup","cardProduct","loaderEl","newFilters","products","addButtons","addButton","onAddButtonClick","error","img","name","size","popularity","_id","price","event","productID","savedProducts","product"],"mappings":"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"}