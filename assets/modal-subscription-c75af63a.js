import{a as i,b as p}from"./vendor-ab5f5c01.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function c(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(s){if(s.ep)return;s.ep=!0;const o=c(s);fetch(s.href,o)}})();i.defaults.baseURL="https://food-boutique.b.goit.study/api";const v=async()=>{const{data:e}=await i.get("/products/categories");return e},E=async({keyword:e,category:t,page:c,limit:l,sortBy:s})=>{const o=new URLSearchParams({page:c,limit:l});e&&o.set("keyword",e),t&&o.set("category",t),s&&o.set("sortBy",s);const{data:a}=await i.get("/products/",{params:o});return a},P=async e=>await i.get(`/products/${e}`),q=async e=>{const{data:t}=await i.get(`/products/popular?limit=${e}`);return t},O=async()=>{const{data:e}=await i.get("/products/discount");return e},m=async e=>{const{data:t}=await i.post("/subscription",e);return t};function f(){p.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}const y=document.querySelector(".form-footer"),d=document.querySelector(".modal-subscription"),r=document.querySelector(".modal-unsubscription"),n=document.querySelector(".modal-backdrop-subscription"),g=document.querySelector(".container-modal");d.classList.add("is-hidden");r.classList.add("is-hidden");const u=e=>{const t=e.target;(t===d||t.closest(".close"))&&(d.classList.add("is-hidden"),n.classList.add("is-hidden")),(t===r||t.closest(".close"))&&(r.classList.add("is-hidden"),n.classList.add("is-hidden")),(t===g||t.closest(".close"))&&(r.classList.add("is-hidden"),n.classList.add("is-hidden"))},h=()=>{d.classList.remove("is-hidden"),n.classList.remove("is-hidden")},L=()=>{r.classList.remove("is-hidden"),n.classList.remove("is-hidden")},b=async e=>{const t={email:e};try{const c=await m(t);h()}catch(c){c.response.data.message==="Subscription already exists"?L():f()}};function S(e){e.preventDefault();const c=document.querySelector(".input-label").value.trim();b(c)}y.addEventListener("submit",S);d.addEventListener("click",u);r.addEventListener("click",u);n.addEventListener("click",u);export{v as a,E as b,q as c,O as d,P as g};
//# sourceMappingURL=modal-subscription-c75af63a.js.map
