import{a as n}from"./vendor-65dc389e.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function i(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(e){if(e.ep)return;e.ep=!0;const o=i(e);fetch(e.href,o)}})();n.defaults.baseURL="https://food-boutique.b.goit.study/api";const S=async()=>{const{data:s}=await n.get("/products/categories");return s},v=async({keyword:s,category:t,page:i,limit:l,sortBy:e})=>{const o=new URLSearchParams({page:i,limit:l});s&&o.set("keyword",s),t&&o.set("category",t),e&&o.set("sortBy",e);const{data:a}=await n.get("/products/",{params:o});return a},E=async s=>{const{data:t}=await n.get(`/products/popular?limit=${s}`);return t},w=async()=>{const{data:s}=await n.get("/products/discount");return s},m=async s=>{const{data:t}=await n.post("/subscription",s);return t},p=document.querySelector(".form-footer"),d=document.querySelector(".modal-subscription"),c=document.querySelector(".modal-unsubscription"),r=document.querySelector(".modal-backdrop-subscription"),f=document.querySelector(".container-modal");d.classList.add("is-hidden");c.classList.add("is-hidden");const u=s=>{const t=s.target;(t===d||t.closest(".close"))&&(d.classList.add("is-hidden"),r.classList.add("is-hidden")),(t===c||t.closest(".close"))&&(c.classList.add("is-hidden"),r.classList.add("is-hidden")),(t===f||t.closest(".close"))&&(c.classList.add("is-hidden"),r.classList.add("is-hidden"))},y=()=>{d.classList.remove("is-hidden"),r.classList.remove("is-hidden")},h=()=>{c.classList.remove("is-hidden"),r.classList.remove("is-hidden")},L=async s=>{const t={email:s};try{const i=await m(t);y()}catch(i){i.response.data.message==="Subscription already exists"?h():showError()}};function g(s){s.preventDefault();const i=document.querySelector(".input-label").value.trim();L(i)}p.addEventListener("submit",g);d.addEventListener("click",u);c.addEventListener("click",u);r.addEventListener("click",u);export{v as a,E as b,w as c,S as g};
//# sourceMappingURL=modal-subscription-f8fcf599.js.map
