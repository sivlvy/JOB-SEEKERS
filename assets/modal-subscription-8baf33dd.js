import{a as c,b as f,N as p}from"./vendor-c374a7a2.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();c.defaults.baseURL="https://food-boutique.b.goit.study/api";const O=async()=>{const{data:t}=await c.get("/products/categories");return t},P=async({keyword:t,category:e,page:n,limit:l,sortBy:s})=>{const o=new URLSearchParams({page:n,limit:l});t&&o.set("keyword",t),e&&o.set("category",e),s&&o.set("sortBy",s);const{data:d}=await c.get("/products/",{params:o});return d},q=async t=>await c.get(`/products/${t}`),N=async t=>{const{data:e}=await c.get(`/products/popular?limit=${t}`);return e},I=async()=>{const{data:t}=await c.get("/products/discount");return t},y=async t=>{const{data:e}=await c.post("/subscription",t);return e};function g(){f.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}function k(t,e){localStorage.setItem(t,JSON.stringify(e))}function x(t){const e=localStorage.getItem(t);try{return JSON.parse(e)}catch{return p.Notify.failure("Oops! Something went wrong!"),e}}const h=document.querySelector(".form-footer"),a=document.querySelector(".modal-subscription"),r=document.querySelector(".modal-unsubscription"),i=document.querySelector(".modal-backdrop-subscription"),L=document.querySelector(".container-modal");a.classList.add("is-hidden");r.classList.add("is-hidden");const u=t=>{const e=t.target;(e===a||e.closest(".close"))&&(a.classList.add("is-hidden"),i.classList.add("is-hidden")),(e===r||e.closest(".close"))&&(r.classList.add("is-hidden"),i.classList.add("is-hidden")),(e===L||e.closest(".close"))&&(r.classList.add("is-hidden"),i.classList.add("is-hidden"))};function m(t){(t.key==="Escape"||t.target===i)&&(a.classList.add("is-hidden"),r.classList.add("is-hidden"),i.classList.add("is-hidden"),document.body.style.overflow="auto")}const b=()=>{a.classList.remove("is-hidden"),i.classList.remove("is-hidden"),document.body.style.overflow="hidden"},S=()=>{r.classList.remove("is-hidden"),i.classList.remove("is-hidden"),document.body.style.overflow="hidden"},w=async t=>{const e={email:t};try{const n=await y(e);b()}catch(n){n.response.data.message==="Subscription already exists"?S():g()}};function v(t){t.preventDefault();const n=document.querySelector(".input-label").value.trim();w(n)}h.addEventListener("submit",v);a.addEventListener("click",u);r.addEventListener("click",u);i.addEventListener("click",u);document.addEventListener("keydown",m);document.addEventListener("click",m);export{O as a,P as b,N as c,I as d,q as g,x as l,k as s};
//# sourceMappingURL=modal-subscription-8baf33dd.js.map
