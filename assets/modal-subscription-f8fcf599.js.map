{"version":3,"file":"modal-subscription-f8fcf599.js","sources":["../../src/js/services/food-api.js","../../src/js/modals/modal-subscription/modal-subscription.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://food-boutique.b.goit.study/api';\n\nexport const getCategoryList = async () => {\n\tconst { data } = await axios.get(`/products/categories`);\n\treturn data;\n};\n\nexport const getAllProducts = async () => {\n\tconst { data } = await axios.get(`/products`);\n\treturn data;\n};\n\nexport const getCurrentProducts = async ({\n\tkeyword,\n\tcategory,\n\tpage,\n\tlimit,\n\tsortBy,\n}) => {\n\tconst params = new URLSearchParams({\n\t\tpage,\n\t\tlimit,\n\t});\n\n\tif (keyword) {\n\t\tparams.set('keyword', keyword);\n\t}\n\n\tif (category) {\n\t\tparams.set('category', category);\n\t}\n\n\tif (sortBy) {\n\t\tparams.set('sortBy', sortBy);\n\t}\n\n\tconst { data } = await axios.get(`/products/`, { params });\n\n\treturn data;\n};\n\nexport const getProductById = async id => {\n\tconst { data } = await axios.get(`/products/${id}`);\n\treturn data;\n};\nexport const getPopularProducts = async limit => {\n\tconst { data } = await axios.get(`/products/popular?limit=${limit}`);\n\treturn data;\n};\n\nexport const getDiscountProducts = async () => {\n\tconst { data } = await axios.get(`/products/discount`);\n\treturn data;\n};\nexport const addEmail = async body => {\n\tconst { data } = await axios.post(`/subscription`, body);\n\n\treturn data;\n};\n","import { addEmail } from '../../services/food-api';\n\nconst formElem = document.querySelector('.form-footer');\nconst modalSubscription = document.querySelector('.modal-subscription');\nconst modalUnsubscription = document.querySelector('.modal-unsubscription');\nconst modalBackElem = document.querySelector('.modal-backdrop-subscription');\nconst closeBackDrop = document.querySelector('.container-modal')\nmodalSubscription.classList.add('is-hidden');\nmodalUnsubscription.classList.add('is-hidden');\n\nconst closeModal = event => {\n\tconst target = event.target;\n\tif (target === modalSubscription || target.closest('.close')) {\n\t\tmodalSubscription.classList.add('is-hidden');\n\t\tmodalBackElem.classList.add('is-hidden');\n\t}\n\tif (target === modalUnsubscription || target.closest('.close')) {\n\t\tmodalUnsubscription.classList.add('is-hidden');\n\t\tmodalBackElem.classList.add('is-hidden');\n\t}\n   if (target === closeBackDrop || target.closest('.close')) {\n\t\tmodalUnsubscription.classList.add('is-hidden');\n\t\tmodalBackElem.classList.add('is-hidden');\n\t}\n};\n\nconst openModalSubscription = () => {\n\tmodalSubscription.classList.remove('is-hidden');\n\tmodalBackElem.classList.remove('is-hidden');\n};\n\nconst openModalUnsubscription = () => {\n\tmodalUnsubscription.classList.remove('is-hidden');\n\tmodalBackElem.classList.remove('is-hidden');\n};\n\nconst handleSubscription = async email => {\n\tconst body = { email };\n\n\ttry {\n\t\tconst checkedEmail = await addEmail(body);\n\n\t\topenModalSubscription();\n\t} catch (err) {\n\t\tif (err.response.data.message === 'Subscription already exists') {\n\t\t\topenModalUnsubscription();\n\t\t} else {\n\t\t\tshowError();\n\t\t}\n\t}\n};\n\nfunction handleSubmit(e) {\n\te.preventDefault();\n\tconst emailInput = document.querySelector('.input-label');\n\tconst email = emailInput.value.trim();\n\thandleSubscription(email);\n}\n\nformElem.addEventListener('submit', handleSubmit);\nmodalSubscription.addEventListener('click', closeModal);\nmodalUnsubscription.addEventListener('click', closeModal);\nmodalBackElem.addEventListener('click', closeModal)\n"],"names":["axios","getCategoryList","data","getCurrentProducts","keyword","category","page","limit","sortBy","params","getPopularProducts","getDiscountProducts","addEmail","body","formElem","modalSubscription","modalUnsubscription","modalBackElem","closeBackDrop","closeModal","event","target","openModalSubscription","openModalUnsubscription","handleSubscription","email","checkedEmail","err","handleSubmit","e"],"mappings":"+uBAEAA,EAAM,SAAS,QAAU,yCAEb,MAACC,EAAkB,SAAY,CAC1C,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMF,EAAM,IAAI,sBAAsB,EACvD,OAAOE,CACR,EAOaC,EAAqB,MAAO,CACxC,QAAAC,EACA,SAAAC,EACA,KAAAC,EACA,MAAAC,EACA,OAAAC,CACD,IAAM,CACL,MAAMC,EAAS,IAAI,gBAAgB,CAClC,KAAAH,EACA,MAAAC,CACF,CAAE,EAEGH,GACHK,EAAO,IAAI,UAAWL,CAAO,EAG1BC,GACHI,EAAO,IAAI,WAAYJ,CAAQ,EAG5BG,GACHC,EAAO,IAAI,SAAUD,CAAM,EAG5B,KAAM,CAAE,KAAAN,GAAS,MAAMF,EAAM,IAAI,aAAc,CAAE,OAAAS,CAAM,CAAE,EAEzD,OAAOP,CACR,EAMaQ,EAAqB,MAAMH,GAAS,CAChD,KAAM,CAAE,KAAAL,CAAM,EAAG,MAAMF,EAAM,IAAI,2BAA2BO,CAAK,EAAE,EACnE,OAAOL,CACR,EAEaS,EAAsB,SAAY,CAC9C,KAAM,CAAE,KAAAT,CAAI,EAAK,MAAMF,EAAM,IAAI,oBAAoB,EACrD,OAAOE,CACR,EACaU,EAAW,MAAMC,GAAQ,CACrC,KAAM,CAAE,KAAAX,CAAM,EAAG,MAAMF,EAAM,KAAK,gBAAiBa,CAAI,EAEvD,OAAOX,CACR,EC1DMY,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAoB,SAAS,cAAc,qBAAqB,EAChEC,EAAsB,SAAS,cAAc,uBAAuB,EACpEC,EAAgB,SAAS,cAAc,8BAA8B,EACrEC,EAAgB,SAAS,cAAc,kBAAkB,EAC/DH,EAAkB,UAAU,IAAI,WAAW,EAC3CC,EAAoB,UAAU,IAAI,WAAW,EAE7C,MAAMG,EAAaC,GAAS,CAC3B,MAAMC,EAASD,EAAM,QACjBC,IAAWN,GAAqBM,EAAO,QAAQ,QAAQ,KAC1DN,EAAkB,UAAU,IAAI,WAAW,EAC3CE,EAAc,UAAU,IAAI,WAAW,IAEpCI,IAAWL,GAAuBK,EAAO,QAAQ,QAAQ,KAC5DL,EAAoB,UAAU,IAAI,WAAW,EAC7CC,EAAc,UAAU,IAAI,WAAW,IAElCI,IAAWH,GAAiBG,EAAO,QAAQ,QAAQ,KACxDL,EAAoB,UAAU,IAAI,WAAW,EAC7CC,EAAc,UAAU,IAAI,WAAW,EAEzC,EAEMK,EAAwB,IAAM,CACnCP,EAAkB,UAAU,OAAO,WAAW,EAC9CE,EAAc,UAAU,OAAO,WAAW,CAC3C,EAEMM,EAA0B,IAAM,CACrCP,EAAoB,UAAU,OAAO,WAAW,EAChDC,EAAc,UAAU,OAAO,WAAW,CAC3C,EAEMO,EAAqB,MAAMC,GAAS,CACzC,MAAMZ,EAAO,CAAE,MAAAY,GAEf,GAAI,CACH,MAAMC,EAAe,MAAMd,EAASC,CAAI,EAExCS,GACA,OAAQK,EAAK,CACTA,EAAI,SAAS,KAAK,UAAY,8BACjCJ,IAEA,WAED,CACF,EAEA,SAASK,EAAaC,EAAG,CACxBA,EAAE,eAAc,EAEhB,MAAMJ,EADa,SAAS,cAAc,cAAc,EAC/B,MAAM,KAAI,EACnCD,EAAmBC,CAAK,CACzB,CAEAX,EAAS,iBAAiB,SAAUc,CAAY,EAChDb,EAAkB,iBAAiB,QAASI,CAAU,EACtDH,EAAoB,iBAAiB,QAASG,CAAU,EACxDF,EAAc,iBAAiB,QAASE,CAAU"}