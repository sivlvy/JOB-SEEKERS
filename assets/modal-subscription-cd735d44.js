import{a as r,b as p}from"./vendor-c374a7a2.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();r.defaults.baseURL="https://food-boutique.b.goit.study/api";const E=async()=>{const{data:t}=await r.get("/products/categories");return t},P=async({keyword:t,category:e,page:i,limit:l,sortBy:s})=>{const o=new URLSearchParams({page:i,limit:l});t&&o.set("keyword",t),e&&o.set("category",e),s&&o.set("sortBy",s);const{data:a}=await r.get("/products/",{params:o});return a},q=async t=>await r.get(`/products/${t}`),O=async t=>{const{data:e}=await r.get(`/products/popular?limit=${t}`);return e},k=async()=>{const{data:t}=await r.get("/products/discount");return t},f=async t=>{const{data:e}=await r.post("/subscription",t);return e};function y(){p.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}const h=document.querySelector(".form-footer"),d=document.querySelector(".modal-subscription"),c=document.querySelector(".modal-unsubscription"),n=document.querySelector(".modal-backdrop-subscription"),L=document.querySelector(".container-modal");d.classList.add("is-hidden");c.classList.add("is-hidden");const u=t=>{const e=t.target;(e===d||e.closest(".close"))&&(d.classList.add("is-hidden"),n.classList.add("is-hidden")),(e===c||e.closest(".close"))&&(c.classList.add("is-hidden"),n.classList.add("is-hidden")),(e===L||e.closest(".close"))&&(c.classList.add("is-hidden"),n.classList.add("is-hidden"))};function m(t){(t.key==="Escape"||t.target===n)&&(d.classList.add("is-hidden"),c.classList.add("is-hidden"),n.classList.add("is-hidden"),document.body.style.overflow="auto")}const g=()=>{d.classList.remove("is-hidden"),n.classList.remove("is-hidden"),document.body.style.overflow="hidden"},b=()=>{c.classList.remove("is-hidden"),n.classList.remove("is-hidden"),document.body.style.overflow="hidden"},w=async t=>{const e={email:t};try{const i=await f(e);g()}catch(i){i.response.data.message==="Subscription already exists"?b():y()}};function v(t){t.preventDefault();const i=document.querySelector(".input-label").value.trim();w(i)}h.addEventListener("submit",v);d.addEventListener("click",u);c.addEventListener("click",u);n.addEventListener("click",u);document.addEventListener("keydown",m);document.addEventListener("click",m);export{E as a,P as b,O as c,k as d,q as g};
//# sourceMappingURL=modal-subscription-cd735d44.js.map
