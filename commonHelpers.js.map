{"version":3,"file":"commonHelpers.js","sources":["../src/js/cart-content/cart-products-list/cart-products-list.js"],"sourcesContent":["import { getProductById } from '../../services/food-api';\nimport { basketProductMarkUp } from '../../home-content/main-products/main-projects';\nimport { loadFromLS, saveToLS } from '../../services/helpers';\nimport icons from '/icons.svg';\n\nconst cartContainer = document.querySelector('.cart-container');\n\nconst savedProductsBasket = loadFromLS('products');\n\n\nconst cartValueProducts = document.querySelectorAll('.js-cart-counter');\n\nfunction updateCartCounter() {\n\tcartValueProducts.forEach(cartValue => {\n\t\tcartValue.textContent = savedProductsBasket.length;\n\t});\n}\n\nupdateCartCounter();\n\nfor (const cartValueProduct of cartValueProducts) {\n\tcartValueProduct.textContent = savedProductsBasket.length;\n}\n\nconst sectionProductList = document.querySelector('.cart-content-wrap');\n\nif (savedProductsBasket.length === 0) {\n\tsectionProductList.style.display = 'none';\n} else {\n\tcartContainer.style.display = 'none';\n}\n\nconst cardProductBasketList = document.querySelector('.js-cart-products');\n\ncardProductBasketList.insertAdjacentHTML(\n\t'beforeend',\n\tcreateBascetProductMarcup(savedProductsBasket)\n);\n\nconst btnItemsClose = document.querySelectorAll('.cart-btn-close');\n\nbtnItemsClose.forEach(btnItemClose => {\n\n\tbtnItemClose.addEventListener('click', onRemoveItemClick);\n});\n\nfunction onRemoveItemClick(event) {\n\tconst removeItemBtn = event.target.closest('.cart-item');\n\n\tconst itemID = removeItemBtn.dataset.id;\n\n\tsavedProductsBasket.forEach((element, index, arr) => {\n\n\t\tconst elementID = element.data._id;\n\t\t\n\n\t\tif (elementID === itemID) {\n\n\t\t\tconst li = document.querySelector('.cart-item');\n\t\t\tli.remove();\n\t\t\t\n\t\t\tsaveToLS('products', savedProductsBasket);\n\n\t\t\tconst infoLS = loadFromLS('products');\n\n\n\n\t\t\tif (savedProductsBasket.length === 0) {\n\n\t\t\t\tsectionProductList.style.display = 'none';\n\t\t\t\tcartContainer.style.display = 'block';\n\t\t\t\tlocalStorage.removeItem('products');\n\n\t\t\t\tlocalStorage.setItem('products', JSON.stringify([]));\n\t\t\t\tcartValueProducts.forEach(cartValue => {\n\t\t\t\t\tcartValue.textContent = test.length;\n\t\t\t\t});\n\t\t\t} \n\t\t}\n\t});\n}\n\nconst totalSummary = document.querySelector('.total__price');\nexport function createTotalNum() {\n\tconst totalStorageNum = loadFromLS('products');\n\tconst total = totalStorageNum.reduce((acc, el) => (acc += el.data.price), 0);\n\tconst endResult = total.toFixed(2);\n\n\ttotalSummary.textContent = `$${String(endResult)}`;\n}\n\n// const resultNumber = parseFloat(resultString);\n\ncreateTotalNum();\n\nconst deleteAllBtn = document.querySelector('.cart__delete-button');\n\ndeleteAllBtn.addEventListener('click', onDeleteAllBtnClick);\n\nexport function onDeleteAllBtnClick() {\n\tlocalStorage.removeItem('products');\n\n\tlocalStorage.setItem('products', JSON.stringify([]));\n\n\tconst test = JSON.parse(localStorage.getItem('products'));\n\n\tcartValueProducts.forEach(cartValue => {\n\t\tcartValue.textContent = test.length;\n\t});\n\n\tif (test.length === 0) {\n\t\tsectionProductList.style.display = 'none';\n\t\tcartContainer.style.display = 'block';\n\t}\n}\n\nfunction createBascetProductMarcup(arr) {\n\treturn arr\n\t\t.map(\n\t\t\tproduct =>\n\t\t\t\t`<li class=\"cart-item\" data-id=\"${product.data._id}\">\n\t\t\t\t\t\t<div class=\"cart-item-wrap\">\n\t\t\t\t\t\t\t<div class=\"cart-img-container\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tclass=\"cart-img\"\n\t\t\t\t\t\t\t\t\tsrc=\"${product.data.img}\"\n\t\t\t\t\t\t\t\t\talt=\"${product.data.name}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"cart-img-text\">\n\t\t\t\t\t\t\t\t<div class=\"cart-item-title-wrap\">\n\t\t\t\t\t\t\t\t\t<h3 class=\"cart-item-title\">${product.data.name}</h3>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tname=\"button\"\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclass=\"cart-btn-close\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"Close modal window\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg width=\"18\" height=\"18\" class=\"cart-icon-close\">\n\t\t\t\t\t\t\t\t\t\t\t<use href=\"${icons}#icon-icon-close\"></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"cart-info-container\">\n\t\t\t\t\t\t\t\t\t<p class=\"cart-info\">\n\t\t\t\t\t\t\t\t\t\tCategory:\n\t\t\t\t\t\t\t\t\t\t<span>${product.data.category.replaceAll('_', ' ')}</span>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p class=\"cart-info cart-info-overflow\">\n\t\t\t\t\t\t\t\t\t\tSize:\n\t\t\t\t\t\t\t\t\t\t<span>${product.data.size}</span>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<h3 class=\"cart-info-price\">$${product.data.price}</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>`\n\t\t)\n\t\t.join('');\n}\n"],"names":["cartContainer","savedProductsBasket","loadFromLS","cartValueProducts","updateCartCounter","cartValue","cartValueProduct","sectionProductList","cardProductBasketList","createBascetProductMarcup","btnItemsClose","btnItemClose","onRemoveItemClick","event","itemID","element","index","arr","saveToLS","totalSummary","createTotalNum","endResult","acc","el","deleteAllBtn","onDeleteAllBtnClick","test","product","icons"],"mappings":"8GAKA,MAAMA,EAAgB,SAAS,cAAc,iBAAiB,EAExDC,EAAsBC,EAAW,UAAU,EAG3CC,EAAoB,SAAS,iBAAiB,kBAAkB,EAEtE,SAASC,GAAoB,CAC5BD,EAAkB,QAAQE,GAAa,CACtCA,EAAU,YAAcJ,EAAoB,MAC9C,CAAE,CACF,CAEAG,IAEA,UAAWE,KAAoBH,EAC9BG,EAAiB,YAAcL,EAAoB,OAGpD,MAAMM,EAAqB,SAAS,cAAc,oBAAoB,EAElEN,EAAoB,SAAW,EAClCM,EAAmB,MAAM,QAAU,OAEnCP,EAAc,MAAM,QAAU,OAG/B,MAAMQ,EAAwB,SAAS,cAAc,mBAAmB,EAExEA,EAAsB,mBACrB,YACAC,EAA0BR,CAAmB,CAC9C,EAEA,MAAMS,EAAgB,SAAS,iBAAiB,iBAAiB,EAEjEA,EAAc,QAAQC,GAAgB,CAErCA,EAAa,iBAAiB,QAASC,CAAiB,CACzD,CAAC,EAED,SAASA,EAAkBC,EAAO,CAGjC,MAAMC,EAFgBD,EAAM,OAAO,QAAQ,YAAY,EAE1B,QAAQ,GAErCZ,EAAoB,QAAQ,CAACc,EAASC,EAAOC,IAAQ,CAElCF,EAAQ,KAAK,MAGbD,IAEN,SAAS,cAAc,YAAY,EAC3C,OAAM,EAETI,EAAS,WAAYjB,CAAmB,EAEzBC,EAAW,UAAU,EAIhCD,EAAoB,SAAW,IAElCM,EAAmB,MAAM,QAAU,OACnCP,EAAc,MAAM,QAAU,QAC9B,aAAa,WAAW,UAAU,EAElC,aAAa,QAAQ,WAAY,KAAK,UAAU,CAAE,CAAA,CAAC,EACnDG,EAAkB,QAAQE,GAAa,CACtCA,EAAU,YAAc,KAAK,MAClC,CAAK,GAGL,CAAE,CACF,CAEA,MAAMc,EAAe,SAAS,cAAc,eAAe,EACpD,SAASC,GAAiB,CAGhC,MAAMC,EAFkBnB,EAAW,UAAU,EACf,OAAO,CAACoB,EAAKC,IAAQD,GAAOC,EAAG,KAAK,MAAQ,CAAC,EACnD,QAAQ,CAAC,EAEjCJ,EAAa,YAAc,IAAI,OAAOE,CAAS,CAAC,EACjD,CAIAD,IAEA,MAAMI,EAAe,SAAS,cAAc,sBAAsB,EAElEA,EAAa,iBAAiB,QAASC,CAAmB,EAEnD,SAASA,GAAsB,CACrC,aAAa,WAAW,UAAU,EAElC,aAAa,QAAQ,WAAY,KAAK,UAAU,CAAE,CAAA,CAAC,EAEnD,MAAMC,EAAO,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,EAExDvB,EAAkB,QAAQE,GAAa,CACtCA,EAAU,YAAcqB,EAAK,MAC/B,CAAE,EAEGA,EAAK,SAAW,IACnBnB,EAAmB,MAAM,QAAU,OACnCP,EAAc,MAAM,QAAU,QAEhC,CAEA,SAASS,EAA0BQ,EAAK,CACvC,OAAOA,EACL,IACAU,GACC,kCAAkCA,EAAQ,KAAK,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA,gBAKtCA,EAAQ,KAAK,GAAG;AAAA,gBAChBA,EAAQ,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,uCAKMA,EAAQ,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAQhCC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQXD,EAAQ,KAAK,SAAS,WAAW,IAAK,GAAG,CAAC;AAAA;AAAA;AAAA;AAAA,kBAI1CA,EAAQ,KAAK,IAAI;AAAA;AAAA;AAAA,uCAGIA,EAAQ,KAAK,KAAK;AAAA;AAAA;AAAA,WAItD,EACA,KAAK,EAAE,CACV"}