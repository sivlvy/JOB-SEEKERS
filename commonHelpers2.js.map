{"version":3,"file":"commonHelpers2.js","sources":["../src/js/services/food-api.js","../src/js/home-content/main-products/main-projects.js","../src/js/home-content/main-products/pagination.js","../src/js/filters/filters.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://food-boutique.b.goit.study/api';\n\nexport const getCategoryList = async () => {\n\tconst { data } = await axios.get(`/products/categories`);\n\treturn data;\n};\n\nexport const getCurrentProducts = async ({\n\tvalue,\n\tcategory,\n\tpage,\n\tlimit,\n\tsortBy,\n}) => {\n\tconst params = new URLSearchParams({\n\t\tpage,\n\t\tlimit,\n\t});\n\n\tif (value) {\n\t\tparams.set('value', value);\n\t}\n\n\tif (category) {\n\t\tparams.set('category', category);\n\t}\n\n\tif (sortBy) {\n\t\tparams.set('sortBy', sortBy);\n\t}\n\n\tconst { data } = await axios.get(`/products/`, { params });\n\n\treturn data;\n};\n\nexport const getProductById = async id => {\n\tconst { data } = await axios.get(`/products/${id}`);\n\treturn data;\n};\n\nexport const getPopularProducts = async limit => {\n\tconst { data } = await axios.get(`/products/popular?limit=${limit}`);\n\treturn data;\n};\n\nexport const getDiscountProducts = async () => {\n\tconst { data } = await axios.get(`/products/discount`);\n\treturn data;\n};\n","import axios from 'axios';\nimport { getCurrentProducts } from '../../services/food-api.js';\n// import { resolvePackageEntry } from 'vite';\n\n\nconst cardProduct = document.querySelector('.product-list');\nconst cardContainer = document.querySelector('.card-container');\nconst loaderEl = document.querySelector('.loader');\n\n\nlet value = \"\"; \nlet category = \"\"; \nlet page = 1;\nlet limit = 6;\n\n\n\nif(cardContainer.offsetWidth >= 768 && cardContainer.offsetWidth < 1440){\n\tlimit = 8;\n\t\n\t\n} \nif (cardContainer.offsetWidth >= 1440) {\n\tlimit = 9;\n}\n\n\n\ngetCurrentProducts({value, category, page, limit})\n\t.then(data => {\n\t\tloaderEl.style.visibility = 'hidden';\n\t\tconst products = data.results;\n\t\t\n\t\t// for(const product of products) {\n\t\t// \tconst replaceSymbolsOfCategory = product.category;\n\t\t// \tconst replacedCategory = replaceSymbolsOfCategory.replace('_', ' ');\n\t\t// \tconsole.log(replacedCategory)\n\t\t// }\n\t\t\n\t\t\n\t\t\n\n\t\n\t\n\t\tcardProduct.insertAdjacentHTML('afterbegin', cardMarkup(products));\n\t})\n\t.catch(error => {\n\t\tconsole.log(error);\n\t});\n\n\tfunction cardMarkup(products) {\n\n\t\t// products.forEach(product => {\n\t\t// \tcategory = product.category.replace('_', ' ')\n\t\t// \tconsole.log(category)\n\t\t\t\n\t\t// });\n\t\t\n\t\treturn products\n\t\t\t.map(\n\t\t\t\t({ img, name, category, size, popularity, price }) => \n\t\t\t\n\t\t\t\t\n\t\t\t\t\t`<li class=\"card-wrapper\">\n\t\t\t\t\t<div class=\"image-wrapper\">\n\t\t\t\t\t<img src=\"${img}\" alt=\"${name}\" loading=\"lazy\" class=\"product-image\" width=\"140\" height=\"140\" />\n\t\t\t\t\t</div>\n\t\t   <div class=\"product-info\">\n\t\t\t <p class=\"product-name\">\n\t\t\t   ${name}\n\t\t\t </p>\n\t\t\t<div class =\"product-items\">\n\t\t\t<p  class=\"product-item\">\n\t\t\tCategory:<span class=\"product-more-info\"> &nbsp;${category}</span>\n\t\t  </p>\n\t\t  <p class=\"product-item\">\n\t\t\tSize:<span class=\"product-more-info\"> &nbsp;${size}</span>\n\t\t  </p>\n\t\t  <p class=\"product-item\">\n\t\t\tPopularity:<span class=\"product-more-info\"> &nbsp;${popularity}</span>\n\t\t  </p></div>\n\t\t\t \n\t\t   </div>\n\t\t   <div class=\"price-and-add\">\n\t\t\t <p class=\"product-price\">$${price}</p>\n\t\t\t <button class=\"add-button\" type=\"button\">\n\t\t\t <svg class=\"icon-button\"width=\"18\" height=\"18\">\n             <use href=\"../../../icons.svg#icon-cart-mob\" >\n             </use></svg>\n\t\t\t </button>\n\t\n\t\t\t </div>\n\t\t   \n\t\t   </li>`\n\t\t\t\t)\n\t\t\n\t\t\t.join('')\n\t\t\t\n\t}\n","import axios from 'axios';\nimport { getCurrentProducts } from '../../services/food-api.js';\n\nconst cardProduct = document.querySelector('.product-list');\nconst paginationElement = document.querySelector('.pagination ul');\n\nlet value = \"\"; \nlet category = \"\"; \nlet page = 1;\nlet limit = 6;\nlet totalPages = 0;\n\ndocument.addEventListener(\"DOMContentLoaded\", async function () {\n  await updateProducts();\n\n  function updateProducts() {\n    getCurrentProducts({ value, category, page, limit })\n      .then(data => {\n        const products = data.results;\n        totalPages = data.totalPages;\n\n        cardProduct.innerHTML = cardMarkup(products);\n        updatePagination();\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n\n  function updatePagination() {\n    paginationElement.innerHTML = createPagination(totalPages, page);\n    const pageButtons = document.querySelectorAll('.pagination li:not(.disabled)');\n  \n    pageButtons.forEach(button => {\n      button.addEventListener('click', async event => {\n        const pageNumber = parseInt(event.currentTarget.dataset.page);\n        if (!isNaN(pageNumber) && pageNumber !== page) {\n          page = pageNumber;\n          updateProducts();\n        }\n      });\n    });\n  }\n  \n  \n\n  function createPagination(totalPages, currentPage) {\n    let liTag = '';\n    let active;\n    let beforePage = currentPage - 1;\n    let afterPage = currentPage + 1;\n  \n    if (currentPage > 1) {\n      liTag += `<li class=\"btn prev\" data-page=\"${currentPage - 1}\"><span>&lt;</span></li>`;\n    } else {\n      liTag += `<li class=\"btn prev disabled\"><span>&lt;</span></li>`;\n    }\n  \n    if (currentPage > 2) {\n      liTag += `<li class=\"first numb\" data-page=\"1\"><span>1</span></li>`;\n      if (currentPage > 3) {\n        liTag += `<li class=\"dots\"><span>...</span></li>`;\n      }\n    }\n  \n    if (currentPage == totalPages) {\n      beforePage = beforePage - 2;\n    } else if (currentPage == totalPages - 1) {\n      beforePage = beforePage - 1;\n    }\n  \n    if (currentPage == 1) {\n      afterPage = afterPage + 2;\n    } else if (currentPage == 2) {\n      afterPage = afterPage + 1;\n    }\n  \n    for (var plength = beforePage; plength <= afterPage; plength++) {\n      if (plength > totalPages) {\n        continue;\n      }\n      if (plength == 0) {\n        plength = plength + 1;\n      }\n      if (currentPage == plength) {\n        active = \"active\";\n      } else {\n        active = \"\";\n      }\n      liTag += `<li class=\"numb ${active}\" data-page=\"${plength}\"><span>${plength}</span></li>`;\n    }\n  \n    if (currentPage < totalPages - 1) {\n      if (currentPage < totalPages - 2) {\n        liTag += `<li class=\"dots\"><span>...</span></li>`;\n      }\n      liTag += `<li class=\"last numb\" data-page=\"${totalPages}\"><span>${totalPages}</span></li>`;\n    }\n  \n    if (currentPage < totalPages) {\n      liTag += `<li class=\"btn next\" data-page=\"${currentPage + 1}\"><span>&gt;</span></li>`;\n    } else {\n      liTag += `<li class=\"btn next disabled\"><span>&gt;</span></li>`;\n    }\n  \n    return liTag;\n  }\n  \n\n  function cardMarkup(products) {\n    return products\n      .map(({ img, name, category, size, popularity, price }) => `\n        <li class=\"card-wrapper\">\n          <div class=\"image-wrapper\">\n            <img src=\"${img}\" alt=\"${name}\" loading=\"lazy\" class=\"product-image\" width=\"140\" height=\"140\" />\n          </div>\n          <div class=\"product-info\">\n            <p class=\"product-name\">${name}</p>\n            <div class=\"product-items\">\n              <p class=\"product-item\">Category:<span class=\"product-more-info\">&nbsp;${category}</span></p>\n              <p class=\"product-item\">Size:<span class=\"product-more-info\">&nbsp;${size}</span></p>\n              <p class=\"product-item\">Popularity:<span class=\"product-more-info\">&nbsp;${popularity}</span></p>\n            </div>\n          </div>\n          <div class=\"price-and-add\">\n            <p class=\"product-price\">$${price}</p>\n            <button class=\"add-button\" type=\"button\">\n              <svg class=\"icon-button\" width=\"18\" height=\"18\">\n                <use href=\"../../../icons.svg#icon-cart-mob\"></use>\n              </svg>\n            </button>\n          </div>\n        </li>`\n      )\n      .join('');\n  }\n});\n","import { getCategoryList } from '../services/food-api';\nimport SlimSelect from 'slim-select';\n\nconst refs = {\n\tselectEl: document.querySelector('.filterts-categories-select'),\n};\n\ngetCategoryList()\n\t.then(data => {\n\t\trenderSelectList(data);\n\t})\n\t.catch(err => console.log(err));\n\nfunction renderSelectList(data) {\n\tconst placeholderStr = `<option disabled selected value=\"Show All\" hidden data-placeholder=\"true\">Categories</option>`;\n\trefs.selectEl.insertAdjacentHTML('afterbegin', placeholderStr);\n\tconst markupSelectList = data\n\t\t.map(elem => {\n\t\t\treturn `<option value=\"${elem}\">${elem.replaceAll('_', ' ')}</option>`;\n\t\t})\n\t\t.join('')\n\t\t.concat(`<option value=\"\">Show All</option>`);\n\n\trefs.selectEl.insertAdjacentHTML('beforeend', markupSelectList);\n\n\tnew SlimSelect({\n\t\tselect: refs.selectEl,\n\t\tsettings: {\n\t\t\tshowSearch: false,\n\t\t\tsearchHighlight: true,\n\t\t},\n\t});\n\n\tconst filtersInstance = new Filters();\n\n\tconsole.log(filtersInstance);\n\n\trefs.selectEl.addEventListener('change', evt =>\n\t\tfiltersInstance.searchOptionForLocalStorage({\n\t\t\tkey: 'category',\n\t\t\tvalue: evt.target.value,\n\t\t})\n\t);\n}\n\nexport class Filters {\n\tconstructor() {\n\t\tthis.STORAGE_FILTERS_KEY = 'filters-parameters';\n\t\tthis.defaultFilters = new Map([\n\t\t\t['keyword', null],\n\t\t\t['category', null],\n\t\t\t['page', 1],\n\t\t\t['limit', 6],\n\t\t]);\n\t\tthis.setDefaultFilters();\n\t\tthis.saveFiltersToLocalStorage();\n\t}\n\n\tsetDefaultFilters() {\n\t\tthis.filtersData =\n\t\t\tJSON.parse(localStorage.getItem(this.STORAGE_FILTERS_KEY)) ||\n\t\t\tnew Map(this.defaultFilters);\n\t}\n\n\tsaveFiltersToLocalStorage() {\n\t\tlocalStorage.setItem(\n\t\t\tthis.STORAGE_FILTERS_KEY,\n\t\t\tJSON.stringify([...this.filtersData])\n\t\t);\n\t}\n\n\tupdateFilters({ key, value }) {\n\t\tif (this.filtersData.get(key) !== value) {\n\t\t\tthis.filtersData.set(key, value);\n\t\t\tthis.saveFiltersToLocalStorage();\n\t\t}\n\t}\n\n\tsearchOptionForLocalStorage({ key, value }) {\n\t\tthis.updateFilters({ key, value });\n\t\tconsole.log(Object.fromEntries([...this.filtersData]));\n\t}\n}\n\nconsole.log(Filters);\n"],"names":["axios","getCategoryList","data","getCurrentProducts","value","category","page","limit","sortBy","params","cardProduct","cardContainer","loaderEl","products","cardMarkup","error","img","name","size","popularity","price","paginationElement","totalPages","updateProducts","updatePagination","createPagination","button","event","pageNumber","currentPage","liTag","active","beforePage","afterPage","plength","refs","renderSelectList","err","placeholderStr","markupSelectList","elem","SlimSelect","filtersInstance","Filters","evt","key"],"mappings":"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"}