{"version":3,"file":"commonHelpers2.js","sources":["../src/js/home-content/main-products/pagination.js","../src/js/home-content/popular-products/popular-products.js","../src/js/home-content/discount-products/discount-products.js"],"sourcesContent":["import axios from 'axios';\nimport { getCurrentProducts } from '../../services/food-api.js';\n\nconst cardProduct = document.querySelector('.product-list');\nconst paginationElement = document.querySelector('.pagination ul');\n\nlet value = \"\"; \nlet category = \"\"; \nlet page = 1;\nlet limit = 6;\nlet totalPages = 0;\n\ndocument.addEventListener(\"DOMContentLoaded\", async function () {\n  await updateProducts();\n\n  function updateProducts() {\n    getCurrentProducts({ value, category, page, limit })\n      .then(data => {\n        const products = data.results;\n        totalPages = data.totalPages;\n\n        cardProduct.innerHTML = cardMarkup(products);\n        updatePagination();\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n\n  function updatePagination() {\n    paginationElement.innerHTML = createPagination(totalPages, page);\n    const pageButtons = document.querySelectorAll('.pagination li:not(.disabled)');\n  \n    pageButtons.forEach(button => {\n      button.addEventListener('click', async event => {\n        const pageNumber = parseInt(event.currentTarget.dataset.page);\n        if (!isNaN(pageNumber) && pageNumber !== page) {\n          page = pageNumber;\n          updateProducts();\n        }\n      });\n    });\n  }\n  \n  \n\n  function createPagination(totalPages, currentPage) {\n    let liTag = '';\n    let active;\n    let beforePage = currentPage - 1;\n    let afterPage = currentPage + 1;\n  \n    if (currentPage > 1) {\n      liTag += `<li class=\"btn prev\" data-page=\"${currentPage - 1}\"><span>&lt;</span></li>`;\n    } else {\n      liTag += `<li class=\"btn prev disabled\"><span>&lt;</span></li>`;\n    }\n  \n    if (currentPage > 2) {\n      liTag += `<li class=\"first numb\" data-page=\"1\"><span>1</span></li>`;\n      if (currentPage > 3) {\n        liTag += `<li class=\"dots\"><span>...</span></li>`;\n      }\n    }\n  \n    if (currentPage == totalPages) {\n      beforePage = beforePage - 2;\n    } else if (currentPage == totalPages - 1) {\n      beforePage = beforePage - 1;\n    }\n  \n    if (currentPage == 1) {\n      afterPage = afterPage + 2;\n    } else if (currentPage == 2) {\n      afterPage = afterPage + 1;\n    }\n  \n    for (var plength = beforePage; plength <= afterPage; plength++) {\n      if (plength > totalPages) {\n        continue;\n      }\n      if (plength == 0) {\n        plength = plength + 1;\n      }\n      if (currentPage == plength) {\n        active = \"active\";\n      } else {\n        active = \"\";\n      }\n      liTag += `<li class=\"numb ${active}\" data-page=\"${plength}\"><span>${plength}</span></li>`;\n    }\n  \n    if (currentPage < totalPages - 1) {\n      if (currentPage < totalPages - 2) {\n        liTag += `<li class=\"dots\"><span>...</span></li>`;\n      }\n      liTag += `<li class=\"last numb\" data-page=\"${totalPages}\"><span>${totalPages}</span></li>`;\n    }\n  \n    if (currentPage < totalPages) {\n      liTag += `<li class=\"btn next\" data-page=\"${currentPage + 1}\"><span>&gt;</span></li>`;\n    } else {\n      liTag += `<li class=\"btn next disabled\"><span>&gt;</span></li>`;\n    }\n  \n    return liTag;\n  }\n  \n\n  function cardMarkup(products) {\n    return products\n      .map(({ img, name, category, size, popularity, price }) => `\n        <li class=\"card-wrapper\">\n          <div class=\"image-wrapper\">\n            <img src=\"${img}\" alt=\"${name}\" loading=\"lazy\" class=\"product-image\" width=\"140\" height=\"140\" />\n          </div>\n          <div class=\"product-info\">\n            <p class=\"product-name\">${name}</p>\n            <div class=\"product-items\">\n              <p class=\"product-item\">Category:<span class=\"product-more-info\">&nbsp;${category}</span></p>\n              <p class=\"product-item\">Size:<span class=\"product-more-info\">&nbsp;${size}</span></p>\n              <p class=\"product-item\">Popularity:<span class=\"product-more-info\">&nbsp;${popularity}</span></p>\n            </div>\n          </div>\n          <div class=\"price-and-add\">\n            <p class=\"product-price\">$${price}</p>\n            <button class=\"add-button\" type=\"button\">\n              <svg class=\"icon-button\" width=\"18\" height=\"18\">\n                <use href=\"../../../icons.svg#icon-cart-mob\"></use>\n              </svg>\n            </button>\n          </div>\n        </li>`\n      )\n      .join('');\n  }\n});\n","import { getPopularProducts } from '../../services/food-api';\n\nconst popular = document.querySelector('.popular-list');\nconst paramDiscount = {\n\tposition: 'top-right',\n\ttimeout: 3000,\n\twidth: '400px',\n\tfontSize: '30px',\n};\nlet limit = 5;\npopular.innerHTML = '';\ngetPopularProducts(limit)\n\t.then(data => {\n\t\tpopular.innerHTML = createMarkup(data);\n\t})\n\t.catch(onSearchError);\n\ndocument.addEventListener('click', function (event) {\n\tconst popularCard = event.target.closest('.popular-list');\n\tif (popularCard) {\n\t\tconst productId = popularCard.dataset.productId;\n\t\t// productId for call modal window\n\t\t// window.location.href = `/products/${productId}`;\n\t\tconsole.log('ID:', productId);\n\t}\n});\n\nfunction createMarkup(array) {\n\treturn array\n\t\t.slice(0, limit)\n\t\t.map(\n\t\t\t({\n\t\t\t\t_id,\n\t\t\t\tname,\n\t\t\t\timg,\n\t\t\t\tcategory,\n\t\t\t\tprice,\n\t\t\t\tsize,\n\t\t\t\tis10PercentOff,\n\t\t\t\tpopularity,\n\t\t\t}) => {\n\t\t\t\treturn `<li class=\"popular-card\" data-product-id=\"${_id}\">\n            <div class=\"popular-img-wrap\">\n                <div class=\"popular-left-section\">\n                    <a class=\"popular-gallery-link\" href=\"#\">\n                        <img src=\"${img}\" alt=\"${name}\" width=\"56\" height=\"56\" loading=\"lazy\" />\n                    </a>\n                </div>\n                <div class=\"popular-center-section\">\n\t\t\t\t\t<div class=\"center-section-up\">\n                \t\t<p class=\"popular-info-item\">${name}</p>\n\t\t\t\t\t\t<button class=\"add-popular-button\">\n\t\t\t\t\t\t\t<svg class=\"popular-icon-button\" width=\"12\" height=\"12\">\n\t\t \t\t\t\t\t<use href=\"../../../icons.svg#icon-cart-mob\" >\n\t\t \t\t\t\t\t</use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"center-section-down\">\n                \t\t<p class=\"popular-category-item\">Category: <span>${category.replace(\n\t\t\t\t\t\t\t\t\t\t\t'_',\n\t\t\t\t\t\t\t\t\t\t\t' '\n\t\t\t\t\t\t\t\t\t\t)}</span></p>\n                \t\t<p class=\"popular-size-item\">Size:<span>${size}</span>Popularity:<span>${popularity}</span></p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n            </div>\n        </li>`;\n\t\t\t}\n\t\t)\n\t\t.join('');\n}\n{\n\t/* <p class=\"popular-category-item\">Category:${category}</p>; */\n}\nfunction onSearchError() {\n\tNotiflix.Notify.failure(\n\t\t'Something went wrong! Please try again.',\n\t\tparamDiscount\n\t);\n}\n","import { getDiscountProducts } from '../../services/food-api';\n\nconst discount = document.querySelector('.discount-list');\nconst paramDiscount = {\n\tposition: 'top-right',\n\ttimeout: 3000,\n\twidth: '400px',\n\tfontSize: '30px',\n};\n\ndiscount.innerHTML = '';\ngetDiscountProducts()\n\t.then(data => {\n\t\tdiscount.innerHTML = createMarkup(data);\n\t})\n\t.catch(onSearchError);\n\ndocument.addEventListener('click', function (event) {\n\tconst discountCard = event.target.closest('.discount-card');\n\tif (discountCard) {\n\t\tconst productId = discountCard.dataset.productId;\n\t\t// productId for call modal window\n\t\t// window.location.href = `/products/${productId}`;\n\t\tconsole.log('ID:', productId);\n\t}\n});\n\nfunction onSearchError() {\n\tNotiflix.Notify.failure(\n\t\t'Something went wrong! Please try again.',\n\t\tparamDiscount\n\t);\n}\n\nfunction getRandomElements(array, count) {\n\tconst shuffledArray = array.slice().sort(() => Math.random() - 0.5);\n\treturn shuffledArray.slice(0, count);\n}\n\nfunction createMarkup(array) {\n\tconst selectedElements = getRandomElements(array, 2);\n\n\treturn selectedElements\n\t\t.map(\n\t\t\t({\n\t\t\t\t_id,\n\t\t\t\tname,\n\t\t\t\timg,\n\t\t\t\tcategory,\n\t\t\t\tprice,\n\t\t\t\tsize,\n\t\t\t\tis10PercentOff,\n\t\t\t\tpopularity,\n\t\t\t}) => {\n\t\t\t\treturn `<li class=\"discount-card\" data-product-id=\"${_id}\">\n            <div class=\"discount-img-wrap\">\n\t\t\t  <div class=\"discount-top-section\">\n               <a class=\"discount-gallery-link\" href=\"#\">\n                <img src=\"${img}\" alt=\"${name}\" width=\"114\" height=\"114\" loading=\"lazy\" />\n               </a>\n\t\t\t  </div>\n\t\t\t  <div class=\"discount-product\">\n              \t<p class=\"discount-info-item\">${name}</p>\n\t\t\t\t<div class=\"discount-prisce-button\">\n             \t<p class=\"discount-price-item\">${price}</p>\n             \t<button class=\"add-cart-button\">\n\t\t\t\t\t<svg class=\"discount-icon-button\" width=\"18\" height=\"18\">\n\t\t \t\t\t<use href=\"../../../icons.svg#icon-cart-mob\" alt=\"cart\" >\n\t\t \t\t\t</use></svg>\n\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t  </div>\n\t\t\t\t<svg class=\"discount-icon\" width=\"60\" height=\"60\">\n                <use href=\"../../../icons.svg#icon-discount\" alt=\"Discount\"></use>\n                </svg>\n            </div>\n          </li>`;\n\t\t\t}\n\t\t)\n\t\t.join('');\n}\n"],"names":["cardProduct","paginationElement","value","category","page","limit","totalPages","updateProducts","getCurrentProducts","data","products","cardMarkup","updatePagination","error","createPagination","button","event","pageNumber","currentPage","liTag","active","beforePage","afterPage","plength","img","name","size","popularity","price","popular","paramDiscount","getPopularProducts","createMarkup","onSearchError","popularCard","productId","array","_id","is10PercentOff","discount","getDiscountProducts","discountCard","getRandomElements","count"],"mappings":"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"}